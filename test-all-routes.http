### WMS API - Teste Integrado de Todas as Rotas
### Base URL
@baseUrl = http://localhost:3000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Im5vdm91c3VhcmlvMTIzIiwic3ViIjoiYmEzMmI0MDMtOGQzMC00ZGI1LTgzNmUtNzUyNzllNDE0MTc0IiwiaWF0IjoxNzY0NDU5OTYwLCJleHAiOjE3NjQ1NDYzNjB9.O1QHCRM7UipaKAkoevoY7VwDqadjW-F786H1z9FAEKs

### ORDEM RECOMENDADA PARA CRIAR DADOS:
### 1. Companies → 2. Suppliers → 3. Material Categories → 4. Materials → 5. Storages → 6. Invoices → 7. Invoice Items → 8. Tasks

### ========================================
### AUTH ROUTES
### ========================================

### 1. Register User
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "username": "novousuario123",
  "password": "123",
  "email": "novoemail123@example.com"
}

### 2. Login
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "novoemail123@example.com",
  "password": "123"
}

### 3. Get Profile
GET {{baseUrl}}/auth/profile
Authorization: Bearer {{token}}

### 4. Change Password (authenticated user)
POST {{baseUrl}}/auth/change-password
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "currentPassword": "Test123456!",
  "newPassword": "NewPassword123!"
}

### 5. Reset Password (public - no auth required)
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "email": "joao.silva@malldre.com",
  "newPassword": "123"
}

### ========================================
### USERS ROUTES
### ========================================

### 6. Create User
POST {{baseUrl}}/users
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "username": "newuser",
  "password": "Pass123!",
  "email": "newuser@example.com"
}

### 7. Get All Users
GET {{baseUrl}}/users
Authorization: Bearer {{token}}

### 8. Get User by UUID
GET {{baseUrl}}/users/2103e8df-f89d-47be-9be1-3a3db0172c35
Authorization: Bearer {{token}}

### 9. Get User by Username
GET {{baseUrl}}/users/username/joaosilva
Authorization: Bearer {{token}}

### 10. Update User
PUT {{baseUrl}}/users/UUID_HERE
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "username": "updateduser",
  "email": "updated@example.com"
}

### 11. Delete User
DELETE {{baseUrl}}/users/UUID_HERE
Authorization: Bearer {{token}}

### ========================================
### COMPANIES ROUTES
### ========================================

### 12. Create Company
POST {{baseUrl}}/companies
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cnpj": "12345678901288",
  "name": "Test Company LTDA",
  "street": "Rua Exemplo 123",
  "city": "São Paulo",
  "state": "SP",
  "country": "Brasil",
  "postalCode": "01234-567"
}

### 13. Get All Companies
GET {{baseUrl}}/companies
Authorization: Bearer {{token}}

### 14. Get Company by UUID
GET {{baseUrl}}/companies/d92138d4-b89f-4fde-ac09-b998e741e900
Authorization: Bearer {{token}}

### 15. Get Company by CNPJ
GET {{baseUrl}}/companies/cnpj/12345678901288
Authorization: Bearer {{token}}

### 16. Update Company
PUT {{baseUrl}}/companies/0e09e365-6cd3-4a29-81cf-3b7fa8858131
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Empresa Exemplo Atualizada LTDA",
  "city": "Rio de Janeiro",
  "state": "RJ"
}

### 17. Delete Company
DELETE {{baseUrl}}/companies/UUID_HERE
Authorization: Bearer {{token}}

### ========================================
### SUPPLIERS ROUTES
### ========================================

### 18. Create Supplier
POST {{baseUrl}}/suppliers
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cnpj": "98765432109889",
  "name": "Fornecedor Teste LTDA",
  "street": "Av. Fornecedor 456",
  "city": "Curitiba",
  "state": "PR",
  "country": "Brasil",
  "postalCode": "80000-000"
}

### 19. Get All Suppliers
GET {{baseUrl}}/suppliers
Authorization: Bearer {{token}}

### 20. Get Supplier by UUID
GET {{baseUrl}}/suppliers/81a185dd-78e9-4253-a964-e6bd125479ef
Authorization: Bearer {{token}}

### 21. Get Supplier by CNPJ
GET {{baseUrl}}/suppliers/cnpj/98765432109889
Authorization: Bearer {{token}}

### 22. Update Supplier
PUT {{baseUrl}}/suppliers/81a185dd-78e9-4253-a964-e6bd125479ef
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Fornecedor Atualizado LTDA",
  "city": "Porto Alegre",
  "state": "RS"
}

### 23. Delete Supplier
DELETE {{baseUrl}}/suppliers/bac8c4e9-a3fc-46b3-881c-37c401da6194
Authorization: Bearer {{token}}

### ========================================
### MATERIAL CATEGORIES ROUTES
### ========================================

### 22. Create Material Category
POST {{baseUrl}}/material-categories
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Electronics",
  "description": "Electronic materials and components",
  "materialUnit": "UN"
}

### 23. Get All Material Categories
GET {{baseUrl}}/material-categories
Authorization: Bearer {{token}}

### 24. Get Material Category by UUID
GET {{baseUrl}}/material-categories/2f4c1e5d-c51c-4674-a0c9-c6ec2a90d4bc
Authorization: Bearer {{token}}

### 25. Get Material Category by Name
GET {{baseUrl}}/material-categories/name/Parafusos e Fixadores
Authorization: Bearer {{token}}

### 26. Update Material Category
PUT {{baseUrl}}/material-categories/2f4c1e5d-c51c-4674-a0c9-c6ec2a90d4bc
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "description": "Parafusos e fixadores"
}

### 27. Delete Material Category
DELETE {{baseUrl}}/material-categories/555f3de4-7195-449f-82c3-5f0b066d41d2
Authorization: Bearer {{token}}

### ========================================
### MATERIALS ROUTES
### ========================================

### 28. Create Material
POST {{baseUrl}}/materials
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "externalCode": "MAT001",
  "description": "Test Material",
  "materialUnit": "UN",
  "categoryId": 1
}

### 29. Get All Materials
GET {{baseUrl}}/materials
Authorization: Bearer {{token}}

### 30. Get Material by UUID
GET {{baseUrl}}/materials/067f4930-062f-4434-985e-5facbcbe1290
Authorization: Bearer {{token}}

### 31. Get Material by External Code
GET {{baseUrl}}/materials/external-code/MAT-001
Authorization: Bearer {{token}}

### 32. Get Materials by Category
GET {{baseUrl}}/materials/category/1
Authorization: Bearer {{token}}

### 33. Update Material
PUT {{baseUrl}}/materials/067f4930-062f-4434-985e-5facbcbe1290
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "description": "Updated Material Description"
}

### 34. Delete Material
DELETE {{baseUrl}}/materials/UUID_HERE
Authorization: Bearer {{token}}

### ========================================
### STORAGES ROUTES
### ========================================

### 35. Create Storage
POST {{baseUrl}}/storages
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "code": "A-01",
  "name": "Warehouse A - Section 01",
  "companyId": 1
}

### 36. Get All Storages
GET {{baseUrl}}/storages
Authorization: Bearer {{token}}

### 37. Get Storage Names List
GET {{baseUrl}}/storages/names/list
Authorization: Bearer {{token}}

### 38. Get Storage by UUID
GET {{baseUrl}}/storages/9967fa63-eb50-454b-bad9-115e79e25a19
Authorization: Bearer {{token}}

### 39. Get Storage by Code
GET {{baseUrl}}/storages/code/A-01
Authorization: Bearer {{token}}

### 40. Get Storages by Company
GET {{baseUrl}}/storages/company/1
Authorization: Bearer {{token}}

### 41. Update Storage
PUT {{baseUrl}}/storages/9967fa63-eb50-454b-bad9-115e79e25a19
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Updated Storage Name"
}

### 42. Delete Storage
DELETE {{baseUrl}}/storages/5534d859-1535-4db5-b8d0-79051c4029d0
Authorization: Bearer {{token}}

### ========================================
### INVOICES ROUTES
### ========================================

### 43. Create Invoice
POST {{baseUrl}}/invoices
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "invoiceNumber": "INV-2025-001",
  "supplierId": 1,
  "receivedAt": "2025-11-29T10:00:00Z",
  "status": "PENDING"
}

### 44. Get All Invoices
GET {{baseUrl}}/invoices
Authorization: Bearer {{token}}

### 45. Get Invoice by UUID
GET {{baseUrl}}/invoices/bcd2d499-2927-4f0b-ba2f-9f9559bfe802
Authorization: Bearer {{token}}

### 46. Update Invoice
PUT {{baseUrl}}/invoices/bcd2d499-2927-4f0b-ba2f-9f9559bfe802
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "RECEIVED"
}

### 47. Delete Invoice
DELETE {{baseUrl}}/invoices/UUID_HERE
Authorization: Bearer {{token}}

### ========================================
### INVOICE ITEMS ROUTES
### ========================================

### 48. Create Invoice Item
POST {{baseUrl}}/invoice-items
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "invoiceId": 1,
  "materialId": 4,
  "quantity": "100",
  "totalValue": "5000.00",
  "status": "WAITING"
}

### 49. Get All Invoice Items
GET {{baseUrl}}/invoice-items
Authorization: Bearer {{token}}

### 51. Get Invoice Items by Invoice UUID
GET {{baseUrl}}/invoice-items/invoice/15746a9d-2dd6-4801-911b-d91966ecb519
Authorization: Bearer {{token}}

### 52. Get Invoice Item by UUID
GET {{baseUrl}}/invoice-items/efe778e4-1f7e-490e-9ecb-3fce2564ef7d
Authorization: Bearer {{token}}

### 53. Update Invoice Item
PUT {{baseUrl}}/invoice-items/efe778e4-1f7e-490e-9ecb-3fce2564ef7d
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": "120",
  "totalValue": "6000.00",
  "status": "CONFORMING"
}

### 54. Delete Invoice Item
DELETE {{baseUrl}}/invoice-items/c088cc4c-1720-4491-9fe5-67abcf53d8f6
Authorization: Bearer {{token}}

### ========================================
### TASKS ROUTES
### ========================================

### 55. Create Task
POST {{baseUrl}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Conference Task - Invoice 1",
  "description": "Conference task for invoice items",
  "taskType": "CONFERENCE",
  "status": "PENDING",
  "invoiceId": 1,
  "materialId": 6,
  "entryDate": "2025-11-29T10:00:00Z",
  "dueDate": "2025-12-30T18:00:00Z"
}

### 56. Get All Tasks
GET {{baseUrl}}/tasks
Authorization: Bearer {{token}}

### 57. Get Tasks with Filters
GET {{baseUrl}}/tasks?status=PENDING&taskType=CONFERENCE&assignedUserId=2
Authorization: Bearer {{token}}

### 58. Get My Tasks
GET {{baseUrl}}/tasks/my-tasks
Authorization: Bearer {{token}}

### 59. Get My Tasks with Filters
GET {{baseUrl}}/tasks/my-tasks?status=PENDING&taskType=CONFERENCE
Authorization: Bearer {{token}}

### 60. Get Open Tasks
GET {{baseUrl}}/tasks/open
Authorization: Bearer {{token}}

### 61. Get Open Tasks by Type
GET {{baseUrl}}/tasks/open?taskType=CONFERENCE
Authorization: Bearer {{token}}

### 62. Get Closed Tasks
GET {{baseUrl}}/tasks/closed
Authorization: Bearer {{token}}

### 63. Get Tasks by User
GET {{baseUrl}}/tasks/user/2103e8df-f89d-47be-9be1-3a3db0172c35
Authorization: Bearer {{token}}

### 64. Get Tasks by Invoice
GET {{baseUrl}}/tasks/invoice/9924c1d6-89b5-4088-b628-3ae34511708a
Authorization: Bearer {{token}}

### 65. Get Task by UUID
GET {{baseUrl}}/tasks/35947996-664e-47ef-97f2-684811f02c59
Authorization: Bearer {{token}}

### 66. Update Task
PUT {{baseUrl}}/tasks/35947996-664e-47ef-97f2-684811f02c59
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "IN_PROGRESS",
  "description": "Task in progress"
}

### 67. Update Task Status
PUT {{baseUrl}}/tasks/35947996-664e-47ef-97f2-684811f02c59/status
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": "COMPLETED"
}

### 68. Assign Task to User
PUT {{baseUrl}}/tasks/9d54b4d3-995e-4681-ba04-5d3cd639e49f/assign
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "userUuid": "2103e8df-f89d-47be-9be1-3a3db0172c35"
}

### 69. Perform Conference (Conforming)
POST {{baseUrl}}/tasks/conference
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "taskUuid": "9d54b4d3-995e-4681-ba04-5d3cd639e49f",
  "quantityFound": 800,
  "userUuid": "2103e8df-f89d-47be-9be1-3a3db0172c35",
  "storageId": 1
}

### 70. Perform Conference (Divergent)
POST {{baseUrl}}/tasks/conference
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "taskUuid": "35947996-664e-47ef-97f2-684811f02c59",
  "quantityFound": 95,
  "userUuid": "2103e8df-f89d-47be-9be1-3a3db0172c35",
  "storageId": 1
}

### 71. Perform Conference (No Storage)
POST {{baseUrl}}/tasks/conference
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "taskUuid": "35947996-664e-47ef-97f2-684811f02c59",
  "quantityFound": 120,
  "userUuid": "2103e8df-f89d-47be-9be1-3a3db0172c35"
}

### 72. Delete Task
DELETE {{baseUrl}}/tasks/UUID_HERE
Authorization: Bearer {{token}}

### ========================================
### INVENTORIES ROUTES
### ========================================

### 73. Create Inventory
POST {{baseUrl}}/inventories
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "invoiceItemId": 10,
  "storageId": 3,
  "quantity": "50"
}

### 74. Get All Inventories
GET {{baseUrl}}/inventories
Authorization: Bearer {{token}}

### 75. Search Inventories
GET {{baseUrl}}/inventories/search?invoiceItemId=2&storageId=1
Authorization: Bearer {{token}}

### 76. Get Inventory by UUID
GET {{baseUrl}}/inventories/7438d0ed-88f0-41cc-b3e1-92e37eebd538
Authorization: Bearer {{token}}

### 77. Get Inventories by Invoice Item
GET {{baseUrl}}/inventories/invoice-item/2
Authorization: Bearer {{token}}

### 78. Get Inventories by Storage
GET {{baseUrl}}/inventories/storage/1
Authorization: Bearer {{token}}

### 79. Update Inventory
PUT {{baseUrl}}/inventories/7438d0ed-88f0-41cc-b3e1-92e37eebd538
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": "200"
}

### 80. Delete Inventory
DELETE {{baseUrl}}/inventories/UUID_HERE
Authorization: Bearer {{token}}

### ========================================
### INTEGRATION TEST FLOW
### ========================================

### 81. FLOW: Complete Conference Workflow
# Step 1: Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

###

# Step 2: Get Open Tasks
GET {{baseUrl}}/tasks/open?taskType=CONFERENCE
Authorization: Bearer {{token}}

###

# Step 3: Assign Task
PUT {{baseUrl}}/tasks/"9d54b4d3-995e-4681-ba04-5d3cd639e49f"/assign
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "userId": 2
}

###

# Step 4: Get Available Storages
GET {{baseUrl}}/storages/names/list
Authorization: Bearer {{token}}

###

# Step 5: Perform Conference
POST {{baseUrl}}/tasks/conference
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "taskUuid": "TASK_UUID",
  "quantityFound": 100,
  "userId": 2,
  "storageId": 1
}

###

# Step 6: Verify Inventory Created
GET {{baseUrl}}/inventories/invoice-item/1
Authorization: Bearer {{token}}

###

# Step 7: Verify Task Status
GET {{baseUrl}}/tasks/TASK_UUID
Authorization: Bearer {{token}}



